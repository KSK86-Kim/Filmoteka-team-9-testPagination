(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{OSpC:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("OSpC"),document.querySelector(".search-input"),document.querySelector(".movie__list"),document.querySelector(".modal-movie"),document.querySelector("[data-modal-watched]"),document.querySelector("[data-modal-queue]"),n("lmye"),n("JBxO"),n("FdtR");var r=n("h8BN"),o=n.n(r),a=(n("iPZ8"),n("kypl"),n("pCzD"),n("4owi"),n("/YXa"),n("WB5j"),n("D/wG"),n("9UJh"),n("WoWj"),n("qoNQ"),n("U00V"),n("xhcB")),i=n.n(a);function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function h(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var p=function(e){return void 0===e&&(e=""),fetch("https://api.themoviedb.org/3/trending/all/day?api_key=e25e680121e89083bb4ba7c0772c65fc&page="+e).then((function(e){return e.json()}))},d=new WeakMap,m=new WeakMap,g=function(){function e(e,t){d.set(this,{writable:!0,value:[]}),m.set(this,{writable:!0,value:2}),this.element=document.querySelector(e),this.elementBtn=document.querySelector(t),h(this,d,[]),this.currentPage=1,this.totalPagas=0,this.goToPrevPage=this.goToPrevPage.bind(this),this.goToNextPage=this.goToNextPage.bind(this),this.objectBtn=[]}var t,n,r,a=e.prototype;return a.fetchPopularMoviesList=function(){var e=this;return p(this.currentPage).then((function(t){var n=t.results,r=t.total_pages;e.totalPagas=r,console.log("привет из фетч: "+e.totalPagas),e.movies=n.map((function(t){return e.movieAdapter(t)}))}))},a.renderMovieCards=function(){this.element.innerHTML=o()(this.movies)},a.renderBntMovies=function(){var e=this.pagination(this.currentPage,this.totalPagas);console.log(e.indexArray),document.querySelector("#pagination_controls").innerHTML=e.code;for(var t,n=this,r=function(){var e=t.value;document.querySelector("#pagination_"+e).addEventListener("click",(function(){n.goToPage(e)}))},o=l(e.indexArray);!(t=o()).done;)r();this.pagination(this.currentPage,this.totalPagas),this.elementBtn.innerHTML=i()(this.objectBtn)},a.addClassActiveParent=function(e){document.getElementById(e).parentNode.classList.add("active")},a.pagination=function(e,t){var n=this.addButtonWithIndex(1),r=[1];e-u(this,m)>0&&(n+="...");for(var o=e-u(this,m);o<=e+u(this,m);o++)o>1&&o<t&&(n+=this.addButtonWithIndex(o),r.push(o));return e+u(this,m)<t-1&&(n+="..."),n+=this.addButtonWithIndex(t),r.push(t),this.objectBtn=r.map((function(e){return{key:""+e}})),{code:n,indexArray:r}},a.addButtonWithIndex=function(e){return"<button id='pagination_"+e+"' type='button'>"+e+"</button>"},a.movieAdapter=function(e){var t=e.poster_path,n=e.original_title,r=e.original_name,o=e.vote_average,a=e.release_date,i=e.first_air_date;return{imgSrc:this.generatePosterPath(t),title:n||r,rating:o,releaseDate:a||i}},a.generatePosterPath=function(e){return"https://themoviedb.org/t/p/w220_and_h330_face"+e},a.updateCurrentPage=function(e){console.log(this.currentPage),this.currentPage=e,h(this,d,[]),this.fetchPopularMoviesList()},a.goToPage=function(e){e<1||e>=this.totalPagas||this.updateCurrentPage(e)},a.goToPrevPage=function(){1!==this.currentPage&&(this.currentPage-=1,h(this,d,[]),this.fetchPopularMoviesList())},a.goToNextPage=function(){this.currentPage!==this.totalPagas+1&&(this.currentPage+=1,h(this,d,[]),this.fetchPopularMoviesList())},t=e,(n=[{key:"movies",get:function(){return u(this,d)},set:function(e){e||console.error("Нет массивов фильмов"),h(this,d,e),this.renderMovieCards(),this.renderBntMovies(),console.log(this.objectBtn),this.addClassActiveParent("pagination_"+this.currentPage)}}])&&s(t.prototype,n),r&&s(t,r),e}(),f=document.querySelector("#prev"),v=document.querySelector("#next"),y=new g(".movie__list",".pagination-controls__list");y.fetchPopularMoviesList().then(console.log("привет ")),console.log(f),f.addEventListener("click",y.goToRerevPage),v.addEventListener("click",y.goToNextPage)},h8BN:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,o){var a,i=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",s=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="movie__list-item">\r\n    <div class="movie-card__wrapper-img">\r\n        <img class="movie-card__img" src='+s(typeof(a=null!=(a=u(n,"imgSrc")||(null!=t?u(t,"imgSrc"):t))?a:l)===c?a.call(i,{name:"imgSrc",hash:{},data:o,loc:{start:{line:6,column:41},end:{line:6,column:51}}}):a)+" alt=''>\r\n    </div>\r\n    <h3 class=\"movie-card__name\">"+s(typeof(a=null!=(a=u(n,"title")||(null!=t?u(t,"title"):t))?a:l)===c?a.call(i,{name:"title",hash:{},data:o,loc:{start:{line:8,column:33},end:{line:8,column:42}}}):a)+'</h3>\r\n    <p class="movie-card__description">'+s(typeof(a=null!=(a=u(n,"releaseDate")||(null!=t?u(t,"releaseDate"):t))?a:l)===c?a.call(i,{name:"releaseDate",hash:{},data:o,loc:{start:{line:9,column:39},end:{line:9,column:54}}}):a)+'</p>\r\n    <p class="movie-card__rating">'+s(typeof(a=null!=(a=u(n,"rating")||(null!=t?u(t,"rating"):t))?a:l)===c?a.call(i,{name:"rating",hash:{},data:o,loc:{start:{line:10,column:34},end:{line:10,column:44}}}):a)+"</p>\r\n    <p>"+s(typeof(a=null!=(a=u(n,"key")||(null!=t?u(t,"key"):t))?a:l)===c?a.call(i,{name:"key",hash:{},data:o,loc:{start:{line:11,column:7},end:{line:11,column:14}}}):a)+"</p>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var a;return"\r\n"+(null!=(a=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:0},end:{line:13,column:9}}}))?a:"")},useData:!0})},xhcB:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,o){var a,i=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="pagination-controls__item">\r\n    <button id=\'pagination_'+c("function"==typeof(a=null!=(a=s(n,"key")||(null!=t?s(t,"key"):t))?a:l)?a.call(i,{name:"key",hash:{},data:o,loc:{start:{line:3,column:27},end:{line:3,column:34}}}):a)+"' type='input' class=\"pagination-controls__btn\">"+c("function"==typeof(a=null!=(a=s(n,"key")||(null!=t?s(t,"key"):t))?a:l)?a.call(i,{name:"key",hash:{},data:o,loc:{start:{line:3,column:82},end:{line:3,column:89}}}):a)+"</button>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var a;return null!=(a=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:5,column:9}}}))?a:""},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.d6859e597d239e8029e1.js.map